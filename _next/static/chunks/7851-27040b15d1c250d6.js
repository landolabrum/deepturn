"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7851],{10530:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(59499),i=r(50029),a=r(8151),s=r.n(a),c=r(64687),o=r.n(c),l=r(67294),d=[".d-flex.jsx-3589974209,.contact-form.jsx-3589974209{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".contact-form.jsx-3589974209{width:100%;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".contact-form__title.jsx-3589974209{font-size:var(--s-1);color:var(--gray-40);margin:var(--s-padding) 0;text-transform:capitalize;}",".contact-form--action.jsx-3589974209{--ui-icon-color:var(--gray-20);}",".contact-form__payment-form.jsx-3589974209{width:100%;}"];d.__hash="3589974209";var u=r(2612),f=r(981),m=r(49263),p=r(41364),x=r(85893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(e){var t,r,n,a=e.onSubmit,c=e.user,v=e.submit,y=(0,m.a)(),b=(0,l.useState)([{name:"firstName",label:"First Name",type:"text",placeholder:"First Name",required:!0},{name:"lastName",label:"Last Name",type:"text",placeholder:"Last Name",required:!0},{name:"email",label:"Email",type:"email",placeholder:"your@email.com",required:!0},{name:"phone",label:"Phone",type:"tel",placeholder:"1 (555) 555-5555",required:!0},{name:"address",label:"Address",type:"text",placeholder:"Your Address",required:!0}]),g=b[0],j=b[1],_=(0,l.useState)(),w=_[0],k=_[1],O=(0,l.useState)(!0),S=O[0],P=O[1],N=(0,l.useState)(),E=N[0];N[1];var Z=(t=(0,i.Z)(o().mark(function e(t){var r,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=3;break}return console.error("updatedFields is not an array",t),e.abrupt("return");case 3:return(n=(null===(r=t.map(function(e){var t,r=w&&(null===(t=(0,p.P)(w,e.name))||void 0===t?void 0:t.value),n=(null==e?void 0:e.value)===r,i=!["",void 0,null,{}].includes(e.value);return!!(n&&i)}).filter(function(e){return!1===e}))||void 0===r?void 0:r.length)===0)!==S&&P(n),e.abrupt("return");case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),D=(r=(0,i.Z)(o().mark(function e(){var t,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=E||c||y)&&(j(r=g.map(function(e){switch(e.name){case"firstName":return h(h({},e),{},{value:t.name?t.name.split(" ")[0]:e.value,width:"50%"});case"lastName":return h(h({},e),{},{value:t.name?t.name.split(" ")[1]:e.value,width:"50%"});case"email":return h(h({},e),{},{value:t.email||e.value});case"phone":return h(h({},e),{},{value:t.phone?(0,f.wW)(t.phone,"US",!0):e.value});case"address":return h(h({},e),{},{value:t.address||e.value});default:return e}})),w||k(r));case 2:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),C=(n=(0,i.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D().then(function(e){return Z(e)});case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,l.useEffect)(function(){C()},[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s(),{id:d.__hash,children:d}),(0,x.jsxs)("div",{className:"jsx-".concat(d.__hash)+" contact-form",children:[(0,x.jsx)("div",{className:"jsx-".concat(d.__hash)+" contact-form__title",children:"Contact"}),(0,x.jsx)(u.Z,{fields:g,disabled:S,onChange:function(e){var t=e.target,r=t.name,n=t.value,i=g.map(function(e,t){return e.name===r&&(e.value=n),e});j(i),Z(i)},onSubmit:function(e){e.preventDefault;var t=g.reduce(function(e,t){var r=t.name;return["firstName","lastName"].includes(r),e[r]=t.value,e},{});t.name="".concat(t.firstName," ").concat(t.lastName),delete t.firstName,delete t.lastName,a(t)},submitText:null==v?void 0:v.text})]})]})}},67851:function(e,t,r){r.d(t,{Z:function(){return T}});var n=r(8151),i=r.n(n),a=r(67294),s=[".d-flex.jsx-966531911,.verify__default.jsx-966531911,.loadslider.jsx-966531911{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".loadslider.jsx-966531911{min-height:100px;min-width:100%;background-size:200% 100%;}","@-webkit-keyframes slidePulse-jsx-966531911{0%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}50%{background-image:linear-gradient(to right,#ff6347 25%,#f30 50%,#ff6347 75%);}100%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}}","@keyframes slidePulse-jsx-966531911{0%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}50%{background-image:linear-gradient(to right,#ff6347 25%,#f30 50%,#ff6347 75%);}100%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}}",".verify.jsx-966531911{margin-top:var(--s-padding);color:var(--white);}","@media (max-width:900px){.verify.jsx-966531911{margin-top:0;padding:var(--s-padding);}}",".verify--header.jsx-966531911{color:var(--gray-40);width:var(--s-padding-width);max-width:var(--s-padding-width);overflow:hidden;padding:var(--s-padding) 0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;text-overflow:ellipsis;}",".verify--header--title.jsx-966531911{color:var(--gray-50);font-size:var(--s-3);}",".verify__default.jsx-966531911{background-color:var(--gray-80);min-height:50vh;color:var(--gray-40);line-height:1;padding:var(--s-padding);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-padding);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;border-radius:var(--border-radius);border:solid 1px var(--gray-60);box-shadow:var(--box-shadow-xl);}",".verify__default.jsx-966531911 h1.jsx-966531911,.verify__default.jsx-966531911 p.jsx-966531911{line-height:1;margin:0;}",".verify__default.jsx-966531911 p.jsx-966531911{color:var(--gray-50);}"];s.__hash="966531911";var c=r(11163),o=r(59499),l=r(50029),d=r(64687),u=r.n(d),f=[".d-flex.jsx-1831036712,.verify-email__content--loader.jsx-1831036712,.verify-email__content.jsx-1831036712{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".verify-email.jsx-1831036712{border-radius:var(--border-radius);margin:var(--s-element) 0;color:var(--primary);background-color:var(--gray-90);height:100%;}","@media (max-width:1100px){.verify-email.jsx-1831036712{margin:var(--s-element) var(--s-padding);width:var(--s-padding-width);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}",".verify-email__content.jsx-1831036712{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;gap:var(--s-element);padding:var(--s-padding);width:var(--s-padding-width);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}",".verify-email__content--loader.jsx-1831036712{height:100%;}","@media (max-width:1100px){.verify-email__content--loader.jsx-1831036712{height:100%;}}",".verify-email__content--success.jsx-1831036712{height:100%;}",".verify-email__content__sign-in.jsx-1831036712{width:100%;}",".verify-email__content__sign-in--title.jsx-1831036712{font-size:var(--s-2);color:var(--gray-20);line-height:2;}"];f.__hash="1831036712";var m=r(52553),p=r(5531),x=r(40384),v=r(2612),h=r(72967),y=r(18508),b=r(99013),g=r(85893);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w=function(e){var t,r,n,s,c,o,d=e.token,j=e.onSuccess,w=(0,a.useState)({status:"verifying_email"}),k=w[0],O=w[1],S=(0,m.ko)("ICustomerService"),P=(0,b.dd)().openModal,N=(t=(0,l.Z)(u().mark(function e(){var t;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return O({status:"no_token_present"}),e.abrupt("return");case 3:return e.next=5,S.verifyEmail(String(d));case 5:(t=e.sent)&&O(t);case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),E=(r=(0,l.Z)(u().mark(function e(){var t,r,n,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==k||null===(t=k.fields)||void 0===t||null===(t=t.find(function(e){return"password"==e.name}))||void 0===t?void 0:t.value,(n=k.customer).metadata.password=r,e.next=5,S.updateMember(n.id,n);case 5:(i=e.sent)&&(Z(),j(i.email));case 7:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),Z=function(){P((0,g.jsx)(h.Z,{email:k.customer.email}))};return(0,a.useEffect)(function(){N()},[d]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:f.__hash,children:f}),(0,g.jsx)("div",{className:"jsx-".concat(f.__hash)+" verify-email",children:(0,g.jsxs)("div",{className:"jsx-".concat(f.__hash)+" "+"verify-email__content".concat("verification_success"===k.status?" verify-email__content--success":""),children:[(0,g.jsx)("div",{className:"jsx-".concat(f.__hash)+" verify-email__content--loader",children:(0,g.jsx)(p.Z,{position:"relative",text:(c="",(o=function(e){return"string"==typeof e})(k.status)?c=String(k.status):o(k.detail)?c=String(k.detail):null!==(n=k.detail)&&void 0!==n&&n.detail&&o(null===(s=k.detail)||void 0===s?void 0:s.detail)&&(c=k.detail.detail),(0,x.Z)(c)),dots:(null==k?void 0:k.status)!=void 0&&["verifying_email"].includes(null==k?void 0:k.status)})}),"incomplete"==k.status&&(null==k?void 0:k.fields)&&(0,g.jsx)(v.Z,{title:String(null==k?void 0:k.detail)||void 0,onChange:function(e){var t,r,n=e.target,i=n.name,a=n.value,s=null==k?void 0:k.fields,c=function(e){return null==s?void 0:s.find(function(t){return t.name===e})},o=null===(t=c("password"))||void 0===t?void 0:t.value,l=null===(r=c("confirm_password"))||void 0===r?void 0:r.value,d=null==s?void 0:s.map(function(e){if(e.name===i){var t=_(_({},e),{},{value:a});return"confirm_password"===i&&o!==a&&""!==o||"password"===i&&l!==a&&""!==l?t.error="Not Same as Password":t.error&&delete t.error,t}return e});O(_(_({},k),{},{fields:d}))},fields:k.fields,onSubmit:E}),"verification_success"===k.status&&k.customer.email&&(0,g.jsx)("div",{className:"jsx-".concat(f.__hash)+" verify-email__content__sign-in",children:(0,g.jsx)(y.Z,{href:"/profile",children:"Go to Account"})})]})})]})},k=[".d-flex.jsx-1754337035,.verify-account.jsx-1754337035{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".verify-account.jsx-1754337035{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--s-padding);border-radius:var(--border-radius);background-color:var(--gray-80);}"];k.__hash="1754337035";var O=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:k.__hash,children:k}),(0,g.jsxs)("div",{className:"jsx-".concat(k.__hash)+" verify-account",children:[(0,g.jsx)("h1",{className:"jsx-".concat(k.__hash),children:"Verify Account"}),(0,g.jsx)(v.Z,{fields:[]})]})]})},S=[".d-flex.jsx-3061175848,.verify-payment--content__contact-form.jsx-3061175848,.verify-payment--header.jsx-3061175848,.verify-payment--content.jsx-3061175848,.verify-payment__token-needed.jsx-3061175848,.verify-payment.jsx-3061175848{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".card.jsx-3061175848,.verify-payment--content__contact-form.jsx-3061175848,.verify-payment__token-needed.jsx-3061175848{width:var(--s-padding-width);border-radius:var(--border-radius);padding:var(--s-padding);background-color:var(--gray-90);}",".verify-payment.jsx-3061175848{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-padding);width:100%;}",".verify-payment__item.jsx-3061175848{width:100%;}",".verify-payment__token-needed.jsx-3061175848{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:var(--secondary);font-size:var(--s-3);height:100%;min-height:400px;width:auto;}",".verify-payment--header.jsx-3061175848,.verify-payment--content.jsx-3061175848{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".verify-payment--header.jsx-3061175848{text-transform:capitalize;width:100%;color:var(--gray-40);font-size:var(--s-2);}",".verify-payment--content.jsx-3061175848{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:var(--gray-40);gap:var(--s-padding);width:100%;}",".verify-payment--content__contact-form.jsx-3061175848{margin-bottom:var(--s-element);}"];S.__hash="3061175848";var P=r(27017),N=r(10530),E=r(83941);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(e){var t,r,n=e.token,s=(0,a.useState)(),c=s[0],o=s[1],d=(0,P.Z)(),f=d.addCartItem,p=d.getCartItems,x=(0,m.ko)("ICustomerService"),v=(0,m.ko)("IProductService"),h=(0,a.useState)(),y=h[0],b=h[1],j=function(){if(console.log("[ ITEM ]",{tokenData:c}),!c||!c.items)return o({error:"Token is invalid"}),!1;var e=c.items.every(function(e){return e.price_id&&e.product_id&&String(e.price_id).startsWith("price_")&&String(e.product_id).startsWith("prod_")});return e||o({error:"Token is invalid"}),e},_=(t=(0,l.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.getProducts({price_ids:c.items.map(function(e){return e.price_id})});case 3:Object.values(e.sent.data).forEach(function(e){f(D(D({},e),{},{price:D(D({},e.price),{},{qty:1})}))}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("[ getProducts ( error )]",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)}),w=(r=(0,l.Z)(u().mark(function e(){var t,r,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return e.prev=1,e.next=4,x.decryptJWT({token:n,secret:"secretKey",algorithm:"HS256"});case 4:null!=(t=e.sent)&&t.decoded&&(console.log("[ JWT DECODE (SUCCESS) ]",t.decoded),o(t.decoded)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),o({error:null===e.t0||void 0===e.t0||null===(r=e.t0.detail)||void 0===r?void 0:r.detail}),console.error("[ JWT DECODE (ERROR) ]",null===e.t0||void 0===e.t0||null===(i=e.t0.detail)||void 0===i?void 0:i.detail);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(){return r.apply(this,arguments)});(0,a.useEffect)(function(){console.log("[ USE EFFECT ]",c,n),n&&void 0===c&&w()},[n]);var k=p();return((0,a.useEffect)(function(){b(k),null!=c&&c.items&&j()&&_()},[o]),n&&(null==c||!c.error)&&j())?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:S.__hash,children:S}),(0,g.jsxs)("div",{className:"jsx-".concat(S.__hash)+" verify-payment",children:[(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--header"}),(0,g.jsxs)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--content",children:[c.items&&(0,g.jsx)(E.Z,{cart:y}),(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--content__contact-form",children:(0,g.jsx)(N.Z,{user:{email:c.email,name:c.name,phone:c.phone},onSubmit:function(e){console.log("[ ON SUBMIT ]",e)},submit:{text:"payment info"}})})]})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:S.__hash,children:S}),(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment__token-needed",children:(0,g.jsx)("div",{className:"jsx-".concat(S.__hash),children:String(null==c?void 0:c.error)||"No token is present, assure you clicked the right link."})})]})},F=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:s.__hash,children:s}),(0,g.jsxs)("div",{className:"jsx-".concat(s.__hash)+" verify__default",children:[(0,g.jsx)("h1",{className:"jsx-".concat(s.__hash),children:"Verify"}),(0,g.jsx)("p",{className:"jsx-".concat(s.__hash),children:"Here is where you will verify a token in which you should have received via a specified contact method."})]})]})},T=function(){var e=(0,c.useRouter)(),t=(e.pathname,e.query),r=(0,a.useState)(""),n=r[0],o=r[1],l=(0,a.useState)(),d=l[0],u=l[1],f=(0,a.useState)(),m=f[0],p=f[1],x={"sign-in":(0,g.jsx)(h.Z,{email:d}),email:(0,g.jsx)(w,{token:m,onSuccess:function(e){return u(e)}}),account:(0,g.jsx)(O,{}),payment:(0,g.jsx)(C,{token:m})};return(0,a.useEffect)(function(){"string"==typeof t.vid&&o(t.vid),"string"==typeof t.token&&p(t.token)},[t,d,p]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i(),{id:s.__hash,children:s}),(0,g.jsx)("div",{className:"jsx-".concat(s.__hash)+" verify",children:void 0===x[n]?(0,g.jsx)(F,{}):x[n]})]})}},41364:function(e,t,r){r.d(t,{L:function(){return s},P:function(){return c}});var n=r(59499);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s=function(e,t,r){return e.map(function(e){return e.name===t?a(a({},e),r):e})},c=function(e,t){return(e&&Object(e).filter(function(e){return e.name==t}))[0]}}}]);