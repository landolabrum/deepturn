"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{2420:function(e,t,i){i.d(t,{Z:function(){return home_controller_Home}});var n=i(5003),r=i.n(n),a=i(7294),s=[];s.__hash="2085888330";var o=[".surveillance.jsx-3472433715{min-height:500px;width:100%;}"];o.__hash="3472433715";var c=i(9499),l=["img.jsx-3422516844{width:100%;height:auto;z-index:1;position:relative;}","img.jsx-3422516844 .d-flex.jsx-3422516844,img.jsx-3422516844 img.jsx-3422516844{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"];l.__hash="3422516844";var h=[".d-flex.jsx-2678087171,.image-control.jsx-2678087171 .image-control__controls.jsx-2678087171{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".image-control.jsx-2678087171{width:auto;position:relative;height:auto;overflow:hidden;outline:solid 1px var(--gray-80);}","@media (max-width:900px){.image-control.jsx-2678087171{max-width:calc(100vw - var(--padding) * 2);}}",".image-control.jsx-2678087171:hover .image-control__controls.jsx-2678087171{bottom:0;opacity:1;}",".image-control.jsx-2678087171 .image-control__element.jsx-2678087171{background-color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:auto;z-index:-1;}",".image-control.jsx-2678087171 .image-control__controls.jsx-2678087171{background-color:var(--gray-100);z-index:2;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:absolute;bottom:-100%;padding:0 var(--s-9);width:calc(100% - var(--s-9) * 2);left:0;height:var(--element-height);opacity:0;-webkit-transition:bottom 0.5s ease,opacity 0.5s ease;transition:bottom 0.5s ease,opacity 0.5s ease;}",".image-control.jsx-2678087171 .image-control__controls__control.jsx-2678087171{cursor:pointer;}",".image-control.jsx-2678087171 .image-control__controls__control.jsx-2678087171:hover{--ui-icon-color:var(--primary);}"];h.__hash="2678087171";var d=i(682),g=i(9817),u=i(1927),x=i(9073),_=i(5893),components_ImageControl_ImageControl=function ImageControl(e){var t=e.children,i=e.variant,n=e.mediaType,s=void 0===n?"image":n,o=e.refreshInterval,c=void 0===o?1e3:o,l=e.error,p=e.fixedLoad,f=(0,a.useRef)(null),m=(0,a.useState)(!0),j=m[0],v=m[1],b=(0,g.Z)("image-control__element",s,i),w=(0,x.dd)(),y=w.openModal,k=w.closeModal,O=w.isModalOpen;return(0,a.useEffect)(function(){var e=setInterval(function(){var e,t=null==f?void 0:null===(e=f.current)||void 0===e?void 0:e.offsetHeight;f.current&&t&&t>30?v(!1):l&&!j&&v(!0)},c);return function(){return clearInterval(e)}},[c,j,f.current]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r(),{id:h.__hash,children:h}),(0,_.jsxs)("div",{className:"jsx-".concat(h.__hash)+" "+"image-control".concat(j?" image-control__loading":""),children:[" ",!0==j&&(0,_.jsx)(d.Z,{height:300,position:void 0!==p&&p?void 0:"relative",text:l||void 0,dots:"string"!=typeof l&&void 0}),(0,_.jsx)("div",{id:"image-control__element",ref:f,className:"jsx-".concat(h.__hash)+" "+"".concat(b),children:a.Children.map(t,function(e){return(0,a.isValidElement)(e)?(0,a.cloneElement)(e):e})}),(0,_.jsxs)("div",{className:"jsx-".concat(h.__hash)+" image-control__controls",children:[(0,_.jsx)("div",{className:"jsx-".concat(h.__hash)+" image-control__controls__control",children:(0,_.jsx)(u.a,{icon:"fa-play-pause"})}),(0,_.jsx)("div",{className:"jsx-".concat(h.__hash)+" image-control__controls__control",children:(0,_.jsx)(u.a,{icon:"fa-expand",onClick:function(){O?k():y({children:(0,_.jsx)(ImageControl,{fixedLoad:!0,variant:i,mediaType:s,refreshInterval:c,error:l,children:t}),variant:"fullscreen"})}})})]})]})]})};function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){(0,c.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var UiVideo_controller_UiMedia=function(e){var t=e.src,i=e.variant,n=e.type,s=e.alt,o=(0,a.useState)({variant:i,type:n}),c=o[0],h=o[1],handleError=function(e){e.preventDefault(),c.error||h(_objectSpread(_objectSpread({},c),{},{error:"failed to load media"}))};return(0,a.useEffect)(function(){},[handleError]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r(),{id:l.__hash,children:l}),(0,_.jsx)(components_ImageControl_ImageControl,_objectSpread(_objectSpread({},c),{},{children:!c.error&&(0,_.jsx)("img",{src:t,alt:s,onError:handleError,className:"jsx-".concat(l.__hash)})}))]})},p=i(8991),f=i(7011),m=i(2516),surveillance_controller_Surveillance=function(){return(0,m.aF)(),(0,a.useEffect)(function(){},[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r(),{id:o.__hash,children:o}),(0,_.jsx)("div",{className:"jsx-".concat(o.__hash)+" surveillance",children:(0,_.jsxs)(f.Z,{xs:1,md:2,padding:"0 0 200px",children:[(0,_.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=2")}),(0,_.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=3")}),(0,_.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=1")})]})})]})},j=i(5960),v=i(29),b=i(6835),w=i(7794),y=i.n(w),k=[".d-flex.jsx-2276483184,.lights__light-header-title.jsx-2276483184,.lights__light-header-action.jsx-2276483184,.lights__light-header.jsx-2276483184,.lights__light.jsx-2276483184,.lights__bar-header.jsx-2276483184{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".lights.jsx-2276483184{width:var(--padding-width);padding:var(--padding);height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".lights__bar-header.jsx-2276483184{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;color:var(--gray-30);}",".lights__light.jsx-2276483184{margin:0;height:auto;overflow:hidden;}",".lights__light-header.jsx-2276483184{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-transform:capitalize;border-radius:var(--border-radius);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".lights__light-header-action.jsx-2276483184{min-height:var(--element-height);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;gap:var(--s-9);--ui-icon-color:var(--gray-40);}",".lights__light-header-action.jsx-2276483184:hover{--ui-icon-color:var(--gray-20);}",".lights__light-header-title.jsx-2276483184{min-height:var(--element-height);gap:var(--s-9);}"];k.__hash="2276483184";var O=i(9280),E=i(7979),C=i(1626),Z=i(483),views_lights_Lights=function(){var e,t,i,n,s=(0,E.U2)(),o=(0,b.Z)(s,2),c=(o[0],o[1]),l=(0,a.useState)(void 0),h=l[0],d=l[1],g=(0,O.ko)("IHomeService"),updateLight=function(e){d(function(){return h.map(function(t){return t.id_==e.id_&&(t=e),t})})},x=(e=(0,v.Z)(y().mark(function _callee(e){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=updateLight,t.next=4,g.lightToggle(Number(e));case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),console.log("[Toggle](ERROR)",t.t2);case 11:case"end":return t.stop()}},_callee,null,[[0,8]])})),function(t){return e.apply(this,arguments)}),p=(t=(0,v.Z)(y().mark(function _callee2(e,t){return y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.t0=updateLight,i.next=4,g.lightBrightness(e,Number(t));case 4:i.t1=i.sent,(0,i.t0)(i.t1),i.next=11;break;case 8:i.prev=8,i.t2=i.catch(0),console.log("[brightnessChangedLight](ERROR)",i.t2);case 11:case"end":return i.stop()}},_callee2,null,[[0,8]])})),function(e,i){return t.apply(this,arguments)}),m=(i=(0,v.Z)(y().mark(function _callee3(e,t){return y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.t0=updateLight,i.next=4,g.lightColor(e,t);case 4:i.t1=i.sent,(0,i.t0)(i.t1),i.next=11;break;case 8:i.prev=8,i.t2=i.catch(0),console.log("[brightnessChangedLight](ERROR)",i.t2);case 11:case"end":return i.stop()}},_callee3,null,[[0,8]])})),function(e,t){return i.apply(this,arguments)}),toggleView=function(e){d(h.map(function(t){return(null==t?void 0:t.id_)==e&&((null==t?void 0:t.view)==void 0?t.view="color":(null==t?void 0:t.view)!=void 0&&delete t.view),t}))},j=(n=(0,v.Z)(y().mark(function _callee4(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c({active:!0,body:"loading lights"}),e.prev=1,e.next=4,g.lights();case 4:d(e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("[ FETCH LIGHTS (ERR) ]",JSON.stringify(e.t0));case 11:case"end":return e.stop()}},_callee4,null,[[1,8]])})),function(){return n.apply(this,arguments)});return(0,a.useEffect)(function(){h||j().then(function(){return c({active:!1})})},[d]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r(),{id:k.__hash,children:k}),(0,_.jsx)("div",{className:"jsx-".concat(k.__hash)+" lights",children:h&&(0,_.jsx)(f.Z,{xs:1,sm:2,lg:3,gap:15,children:Object.entries(h).map(function(e,t){var i=(0,b.Z)(e,2),n=(i[0],i[1]);return(0,_.jsx)("div",{className:"jsx-".concat(k.__hash)+" lights__light",children:(0,_.jsx)(C.Z,{header:(0,_.jsxs)("div",{className:"jsx-".concat(k.__hash)+" lights__light-header",children:[(0,_.jsxs)("div",{className:"jsx-".concat(k.__hash)+" lights__light-header-title",children:[null==n?void 0:n.name,(0,_.jsx)(Z.Z,{name:null==n?void 0:n.id_,value:n.is_on,onChange:function(){return x(n.id_)}})]}),(0,_.jsx)("div",{className:"jsx-".concat(k.__hash)+" lights__light-header-action",children:(0,_.jsx)(u.a,{onClick:function(){return toggleView(n.id_)},icon:(null==n?void 0:n.view)!="color"?"fa-palette":"fa-sun"})})]}),onChange:function(e){String(e).includes("#")?m(n.id_,String(e)):p(n.id_,e)},isColor:"color"==n.view,barCount:5,percentage:100*n.bri/254})},t)})})})]})},home_controller_Home=function(){var e={surveillance:(0,_.jsx)(surveillance_controller_Surveillance,{}),lights:(0,_.jsx)(views_lights_Lights,{})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r(),{id:s.__hash,children:s}),(0,_.jsx)(j.Z,{variant:"fullwidth",title:"home",defaultView:"lights",views:e})]})}}}]);