"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8311],{17998:function(e,t,r){r.d(t,{Z:function(){return Y}});var n=r(21378),i=r.n(n),a=r(67294),s=[".d-flex.jsx-2463574095,.home__default.jsx-2463574095{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".home__default.jsx-2463574095{width:var(--s-4-width);padding:var(--s-4);}",".home__default--title.jsx-2463574095{color:var(--gray-30);font-size:var(--s-3);}",".home.jsx-2463574095{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}"];s.__hash="2463574095";var o=[".surveillance.jsx-3472433715{min-height:500px;width:100%;}"];o.__hash="3472433715";var c=r(59499),l=["img.jsx-925066019{width:100%;height:auto;z-index:1;position:relative;}","img.jsx-925066019 .d-flex.jsx-925066019,img.jsx-925066019 img.jsx-925066019{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".d-flex.jsx-925066019,img.jsx-925066019{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"];l.__hash="925066019";var d=[".d-flex.jsx-1218438721,.image-control.jsx-1218438721 .image-control__controls.jsx-1218438721{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".image-control.jsx-1218438721{--icon-size:60px;--font-size:var(--s-7);width:inherit;position:relative;background-color:var(--black);overflow:hidden;box-shadow:inset 0 0 5px var(--gray-90);}",".image-control__loading.jsx-1218438721{width:100%;aspect-ratio:16/9;}",".image-control.jsx-1218438721:hover .image-control__controls.jsx-1218438721{bottom:0;opacity:1;}",".image-control.jsx-1218438721 .image-control__element.jsx-1218438721{background-color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:auto;z-index:-1;}",".image-control.jsx-1218438721 .image-control__controls.jsx-1218438721{background-color:var(--gray-100);z-index:2;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:absolute;bottom:-100%;padding:0 var(--s-9);width:calc(100% - var(--s-9) * 2);left:0;height:var(--s-element);opacity:0;-webkit-transition:bottom 0.5s ease,opacity 0.5s ease;transition:bottom 0.5s ease,opacity 0.5s ease;}",".image-control.jsx-1218438721 .image-control__controls__control.jsx-1218438721{cursor:pointer;}",".image-control.jsx-1218438721 .image-control__controls__control.jsx-1218438721:hover{--ui-icon-color:var(--primary);}"];d.__hash="1218438721";var h=r(85153),u=r(79785),x=r(55140),b=r(36946),f=r(85893),p=function e(t){var r=t.children,n=t.variant,s=t.mediaType,o=void 0===s?"image":s,c=t.refreshInterval,l=void 0===c?1e3:c,p=t.error,g=t.loadingText,m=t.fixedLoad,_=(0,a.useRef)(null),v=(0,a.useState)(!0),j=v[0],y=v[1],w=(0,u.Z)({cls:"image-control__element",type:o,variant:n}),k=(0,b.dd)(),S=k.openModal,O=k.closeModal,N=k.isModalOpen;return(0,a.useEffect)(function(){var e=setInterval(function(){var e,t=null==_||null===(e=_.current)||void 0===e?void 0:e.offsetHeight;_.current&&t&&t>30?y(!1):p&&!j&&y(!0)},l);return function(){return clearInterval(e)}},[l,j,_.current]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:d.__hash,children:d}),(0,f.jsxs)("div",{className:"jsx-".concat(d.__hash)+" "+"image-control".concat(j?" image-control__loading":""),children:[" ",!0==j&&(0,f.jsx)(h.Z,{position:void 0!==m&&m?void 0:"relative",text:p||g||void 0,dots:!["string","object"].includes(typeof p)&&void 0}),(0,f.jsx)("div",{id:"image-control__element",ref:_,className:"jsx-".concat(d.__hash)+" "+"".concat(w),children:a.Children.map(r,function(e){return(0,a.isValidElement)(e)?(0,a.cloneElement)(e):e})}),(0,f.jsxs)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls",children:[(0,f.jsx)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls__control",children:(0,f.jsx)(x.a,{icon:"fa-play-pause"})}),(0,f.jsx)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls__control",children:(0,f.jsx)(x.a,{icon:"fa-expand",onClick:function(){N?O():S({children:(0,f.jsx)(e,{fixedLoad:!0,variant:n,mediaType:o,refreshInterval:l,error:p,children:r}),variant:"fullscreen"})}})})]})]})]})};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=function(e){var t=e.src,r=e.variant,n=e.type,s=e.alt,o=e.loadingText,c=e.rotate,d=(0,a.useState)({variant:r,type:n}),h=d[0],u=d[1],b=(0,a.useState)(0),g=b[0],_=b[1],v=(0,a.useRef)(),j=function(){u(m(m({},h),{},{error:null})),_(function(e){return e+1})},y=function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{style:{color:"#f90"},children:[o,", Failed"]}),(0,f.jsx)("div",{children:(0,f.jsx)(x.a,{icon:"fa-arrows-rotate",onClick:j})})]})},w=function(e){e.preventDefault(),h.error||u(m(m({},h),{},{error:(0,f.jsx)(y,{})}))};return h.loadingText=o,(0,a.useEffect)(function(){var e;c&&null!=v&&v.current?v.current.style.transform="rotate(".concat(c,"deg)"):!c&&null!=v&&null!==(e=v.current)&&void 0!==e&&e.style.transform&&delete v.current.style},[w,h,c,null==v?void 0:v.current]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:l.__hash,children:l}),(0,f.jsx)(p,m(m({},h),{},{children:!h.error&&(0,f.jsx)("img",{ref:v,src:t,alt:s,onError:w,className:"jsx-".concat(l.__hash)},g)}))]})},v=r(23992),j=r(85854),y=r(11907),w=function(){return(0,y.a)(),(0,a.useEffect)(function(){},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:o.__hash,children:o}),(0,f.jsx)("div",{className:"jsx-".concat(o.__hash)+" surveillance",children:(0,f.jsxs)(j.Z,{xs:1,md:2,padding:"0 0 200px",children:[(0,f.jsx)(_,{src:"".concat(v.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=1"),loadingText:"loading camera 1"}),(0,f.jsx)(_,{src:"".concat(v.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=2"),loadingText:"loading camera 2"})]})})]})},k=r(67996),S=r(27812),O=r(50029),N=r(16835),C=r(64687),E=r.n(C),I=[".d-flex.jsx-131766487,.lights__light-header-title.jsx-131766487,.lights__light-header--action.jsx-131766487,.lights__light.jsx-131766487{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".lights.jsx-131766487{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".lights__light.jsx-131766487{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);border:solid 1px var(--gray-80);border-radius:var(--border-radius);background-color:var(--gray-90);padding:var(--s-9);}",".lights__light-header.jsx-131766487{width:100%;}",".lights__light-header--action.jsx-131766487{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;height:var(--s-element);gap:var(--s-9);--ui-icon-color:var(--gray-40);}",".lights__light-header--action.jsx-131766487:hover{--ui-icon-color:var(--gray-20);}",".lights__light-header-title.jsx-131766487{min-height:var(--s-element);gap:var(--s-9);}",".in-group.jsx-131766487{background-color:var(--primary) !important;}"];I.__hash="131766487";var P=r(10394),Z=r(79223),R=[".d-flex.jsx-3157623724,.bar.jsx-3157623724 .bar__container.jsx-3157623724 .bar__bars-container.jsx-3157623724 .bar__percentage.jsx-3157623724,.bar.jsx-3157623724 .bar__container.jsx-3157623724 .bars__icon.jsx-3157623724,.bar.jsx-3157623724 .bar__container.jsx-3157623724 .bar__header.jsx-3157623724{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".bar.jsx-3157623724{width:100%;}",".bar__primary.jsx-3157623724{background-color:var(--primary-o);}",".bar.jsx-3157623724 .bar__container.jsx-3157623724:hover .bar__bars-container.jsx-3157623724 .bar__percentage.jsx-3157623724{color:var(--white);text-shadow:#f30 1px 0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;visibility:visible;}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bar__header.jsx-3157623724{overflow:hidden;min-height:var(--s-element);white-space:nowrap;position:relative;line-height:1;}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bars__icon.jsx-3157623724{height:var(--s-element);padding-top:20px;--ui-icon-color:var(--gray-60);padding:30px 0 20px;}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bars__status.jsx-3157623724{position:absolute;right:var(--s-9);top:4px;text-transform:capitalize;font-size:var(--s-7);color:var(--yellow-o);--ui-icon-width:var(--s-6);}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bars__status.jsx-3157623724 .bars__status-low.jsx-3157623724{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:5px;}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bar__bars-container.jsx-3157623724{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;gap:var(--border-radius);overflow:hidden;border-radius:var(--border-radius);}",".bar.jsx-3157623724 .bar__container.jsx-3157623724 .bar__bars-container.jsx-3157623724 .bar__percentage.jsx-3157623724{font-size:var(--s-1);visibility:hidden;position:absolute;top:0;bottom:0;width:100%;height:100%;text-align:center;color:var(--gray-20-o);}",".bar__bars-content.jsx-3157623724{box-shadow:inset 0 0 4px 2px var(--gray-100-o);border:solid 1px var(--gray-70);overflow:hidden;border-radius:var(--border-radius);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);height:var(--s-element);background-color:var(--gray-70-o);}",".bar__bars-content.jsx-3157623724 .bar__bars-bar-partial.jsx-3157623724{border-top:solid 1px var(--gray-70);}",".bar__bars-content.jsx-3157623724 .bar__bars-bar-filled.jsx-3157623724,.bar__bars-content.jsx-3157623724 .bar__bars-bar-partial.jsx-3157623724{height:100%;background-color:var(--bar-background,var(--yellow));}",".bar__timestamp.jsx-3157623724{width:100%;font-size:var(--s-9);padding-bottom:var(--s-9);line-height:1;color:var(--gray-50);white-space:nowrap;text-align:right;}"];R.__hash="3157623724";var F=r(47265),A=r(49334),L=r(96486),z=function(e){var t=e.barCount,r=e.percentage,n=e.icon,s=e.status,o=e.timestamp,c=e.header,l=e.onChange,d=(0,a.useState)(r),h=d[0],u=d[1],b=(0,a.useRef)(null),p=(0,a.useRef)((0,L.debounce)(function(e){l&&l(e)},1e3)).current,g=function(e){if(b.current){var t=b.current.getBoundingClientRect(),r=Math.max(0,Math.min(100-(e.clientY-t.top)/t.height*100,100));u(r),p(r.toFixed(0))}};return(0,a.useEffect)(function(){u(r)},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:R.__hash,children:R}),(0,f.jsxs)("div",{className:"jsx-".concat(R.__hash)+" bar",children:[o&&(0,f.jsx)("div",{className:"jsx-".concat(R.__hash)+" bar__timestamp",children:(0,F.vc)(o,{time:!0})}),(0,f.jsxs)("div",{className:"jsx-".concat(R.__hash)+" bar__container",children:[c&&(0,f.jsxs)("div",{className:"jsx-".concat(R.__hash)+" bar__header",children:[c,n&&(0,f.jsx)("div",{className:"jsx-".concat(R.__hash)+" bars__icon",children:(0,f.jsx)(x.a,{icon:n})}),s&&(0,f.jsx)("div",{className:"jsx-".concat(R.__hash)+" bars__status",children:["STATUS_LOW","low","high"].includes(s)&&(0,f.jsxs)("div",{className:"jsx-".concat(R.__hash)+" bars__status-low",children:[(0,f.jsx)(x.a,{color:"#f90",icon:"fa-exclamation-triangle"}),(0,A.Z)(s)]})})]}),(0,f.jsxs)("div",{ref:b,onMouseDown:function(e){return g(e)},onMouseMove:function(e){return 1===e.buttons&&g(e)},className:"jsx-".concat(R.__hash)+" bar__bars-container",children:[function(){for(var e=[],r={filledBar:"bar__bars-bar-filled",emptyBar:"bar__bars-bar-empty",partialBar:"bar__bars-bar-partial"},n=0;n<t;n++){var a=void 0,s={};n<Math.floor(h*t/100)?a=r.filledBar:n===Math.floor(h*t/100)?(s.height="".concat(h*t%100,"%"),a=r.partialBar):(delete s.height,a=r.emptyBar),e.push((0,f.jsxs)("span",{className:"jsx-".concat(R.__hash),children:[(0,f.jsx)(i(),{id:R.__hash,children:R}),(0,f.jsx)("div",{className:"jsx-".concat(R.__hash)+" bar__bars-content",children:(0,f.jsx)("div",{style:s,className:"jsx-".concat(R.__hash)+" "+"bar__bars-bar ".concat(a)})})]},n))}return e}(),(0,f.jsx)("div",{className:"jsx-".concat(R.__hash)+" bar__percentage",children:(0,f.jsxs)("div",{className:"jsx-".concat(R.__hash),children:[h.toString().split(".")[0],"%"]})})]})]})]})]})},D=r(59559),M=r(71054),T=r(10577),$=function(e,t,r){var n,i,a,s=e/65535*360,o=r/254*(t/254),c=o*(1-Math.abs(s/60%2-1)),l=r/254-o/2;return s>=0&&s<60?(n=o,i=c,a=0):s>=60&&s<120?(n=c,i=o,a=0):s>=120&&s<180?(n=0,i=o,a=c):s>=180&&s<240?(n=0,i=c,a=o):s>=240&&s<300?(n=c,i=0,a=o):(n=o,i=0,a=c),n=Math.round((n+l)*255),i=Math.round((i+l)*255),a=Math.round((a+l)*255),"#".concat(n.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0"))},U=[".d-flex.jsx-2325468756,.color-picker.jsx-2325468756{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".color-picker.jsx-2325468756{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;position:relative;height:100%;cursor:pointer;}",".color-picker__info.jsx-2325468756{gap:var(--s-9);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".color-picker.jsx-2325468756 .preview-color.jsx-2325468756{width:var(--s-element);aspect-ratio:1;cursor:pointer;border-radius:var(--border-radius);}",".color-picker.jsx-2325468756 .color-canvas.jsx-2325468756{width:100%;border-radius:var(--border-radius);}"];U.__hash="2325468756";var B=function(e){var t=e.hex,r=e.onChange,n=(0,a.useState)(),s=n[0],o=n[1],c=(0,a.useRef)(null);(0,a.useEffect)(function(){if(c.current){var e=c.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d",{willReadFrequently:!0});if(t){var r=t.createLinearGradient(0,0,e.width,0);r.addColorStop(0,"red"),r.addColorStop(.15,"yellow"),r.addColorStop(.33,"green"),r.addColorStop(.49,"cyan"),r.addColorStop(.67,"blue"),r.addColorStop(.84,"magenta"),r.addColorStop(1,"red"),t.fillStyle=r,t.fillRect(0,0,e.width,e.height)}}},[]);var l=(0,a.useCallback)((0,L.debounce)(function(e){r&&r(e)},1e3),[r]),d=function(e){var t=e.target,r=(t.name,t.value);o("#".concat(r)),6===r.length&&l(r)};return(0,a.useEffect)(function(){s||o(t||"#fff")},[t,o,d]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:U.__hash,children:U}),(0,f.jsxs)("div",{className:"jsx-".concat(U.__hash)+" color-picker",children:[(0,f.jsxs)("div",{className:"jsx-".concat(U.__hash)+" color-picker__info",children:[(0,f.jsx)("div",{style:{backgroundColor:s},className:"jsx-".concat(U.__hash)+" preview-color"}),(0,f.jsxs)("div",{className:"jsx-".concat(U.__hash)+" color-picker__info",children:["#",(0,f.jsx)(M.Z,{value:null==s?void 0:s.replaceAll("#",""),name:"hex",onChange:d,size:"sm"})]})]}),(0,f.jsx)("canvas",{ref:c,onClick:function(e){if(c.current){var r=c.current,n=r.getContext("2d",{willReadFrequently:!0});if(n){var i=r.getBoundingClientRect(),a=e.clientX-i.left,s=e.clientY-i.top,d=n.getImageData(a,s,1,1).data,h="#"+(16777216+(d[0]<<16|d[1]<<8|d[2]<<0)).toString(16).slice(1);t||o(h),l(h)}}},className:"jsx-".concat(U.__hash)+" color-canvas"})]})]})},G=[".knob-container.jsx-1601322626{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;width:100px;height:100px;}",".knob.jsx-1601322626{width:100%;height:100%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transition:#1d1d1d 0.3s ease-in-out;transition:#1d1d1d 0.3s ease-in-out;}",".knob.jsx-1601322626:hover{box-shadow:0 0 8px rgba(255,99,71,0.6);}",".label.jsx-1601322626{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:white;font-size:1.2rem;z-index:10;}"];G.__hash="1601322626";var H=function(e){var t,r,n=e.percent,a=(e.setPercent,e.style),s=e.label,o={background:"conic-gradient(".concat(null!==(t=null==a?void 0:a.color)&&void 0!==t?t:"#ff3300"," 0% ").concat(n,"%, ").concat(null!==(r=null==a?void 0:a.backgroundColor)&&void 0!==r?r:"#000"," ").concat(n,"% 100%)")};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:G.__hash,children:G}),(0,f.jsx)("div",{className:"jsx-".concat(G.__hash)+" knob-container",children:(0,f.jsx)("div",{style:o,onMouseDown:function(e){},className:"jsx-".concat(G.__hash)+" knob",children:s&&(0,f.jsx)("span",{className:"jsx-".concat(G.__hash)+" label",children:s})})})]})};function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var q=function(){var e,t,r=(0,Z.U2)(),n=(0,N.Z)(r,2),s=(n[0],n[1]),o=(0,a.useState)(!1);o[0],o[1];var c=(0,a.useState)(),l=c[0],d=c[1],h=(0,a.useState)(),u=h[0],b=h[1],p=(0,a.useState)(!1),g=p[0];p[1];var m=(0,P.ko)("IHomeService"),_=(0,a.useState)("light"),v=_[0],y=_[1],w=function(e,t){b(function(){return u.map(function(r){return r.id_==e.id_&&(t&&(e.view="color"),r=e),r})})},k=function(e){b(u.map(function(t){return(null==t?void 0:t.id_)==e&&((null==t?void 0:t.view)==void 0?t.view="color":(null==t?void 0:t.view)!=void 0&&delete t.view),t}))},C=u&&(null==u?void 0:u.filter(function(e){return e.is_on}))||[],R=function(e){if(0!==C.length){var t=((l?C.findIndex(function(e){return e.id_===l.id_}):-1)+1)%C.length,r=C[t];d(r),q("color",{id:r.id_,hex:e})}},F=(0,a.useState)([]),A=F[0],L=F[1];C&&C.map(function(e,t){var r=null!=e&&e.hex?"#".concat(function e(t){return""===t?"":e(t.substr(1))+t.charAt(0)}(e.hex.substring(1,e.hex.length))):"#ff3300";return{time:(t+1)*1e3,value:r,backgroundColor:r,onPoint:R}});var U=(e=(0,O.Z)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s({active:!0,body:"loading ".concat(t),animation:!0}),e.prev=1,e.next=4,m.hue_list(t);case 4:b(e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("[ FETCH LIGHTS (ERR) ]",JSON.stringify(e.t0));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t){return e.apply(this,arguments)}),G=function(e){L(void 0!==A?[].concat((0,S.Z)(A),[e]):[e])},J=function(e){A&&L(A.filter(function(t){return t!==e}))},q=(t=(0,O.Z)(E().mark(function e(t,r){var n,i,a,o,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=function(e,t,r){s({active:e,body:"".concat(t,", ").concat(r," "),animation:!0})})(!0,t,null==r?void 0:r.name),i=function(){var e=(0,O.Z)(E().mark(function e(n){var i,a,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=Number(n),e.t0=t,e.next="toggle"===e.t0?4:"brightness"===e.t0?8:"color"===e.t0?13:21;break;case 4:return e.next=6,m.hue_toggle(a,"group"===v&&"group"||void 0);case 6:return i=e.sent,e.abrupt("break",21);case 8:if(!((null==r?void 0:r.bri)!==void 0)){e.next=12;break}return e.next=11,m.hue_brightness(a,r.bri,v);case 11:i=e.sent;case 12:return e.abrupt("break",21);case 13:if(!(null!=r&&r.hex)){e.next=20;break}return console.log("[ data.hex ] ",r.hex,v),e.next=17,m.lightColor(n,r.hex,v);case 17:s=$((i=e.sent).hue,i.sat,i.bri),i=X(X({},i),{},{hex:s,view:"color"});case 20:return e.abrupt("break",21);case 21:i&&w(i,"color"===t);case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),!(A.length>0&&["toggle","brightness","color"].includes(t))){e.next=23;break}a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,void 0)}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(A),e.prev=5,a.s();case 7:if((o=a.n()).done){e.next=13;break}return c=o.value,e.next=11,i(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:e.next=26;break;case 23:if(!(null!=r&&r.id)){e.next=26;break}return e.next=26,i(r.id);case 26:n(!1,t,null==r?void 0:r.name);case 27:case"end":return e.stop()}},e,null,[[5,15,18,21]])})),function(e,r){return t.apply(this,arguments)}),W=function(e){U(e).then(function(){s({active:!1}),e&&y(e)})};return(0,a.useEffect)(function(){void 0==u&&W()},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:I.__hash,children:I}),(0,f.jsxs)("div",{className:"jsx-".concat(I.__hash)+" lights",children:[(0,f.jsx)(H,{percent:10}),u&&!g&&(0,f.jsx)(j.Z,{xs:1,sm:3,gap:15,children:Object.entries(u).map(function(e,t){var r=(0,N.Z)(e,2),n=(r[0],r[1]);return(0,f.jsxs)("div",{onDoubleClick:function(){null!=A&&A.includes(n.id_)?(console.log("removeFromGroup(".concat(n.id_,")")),J(n.id_)):(console.log("addToGroup(".concat(n.id_,")")),G(n.id_))},className:"jsx-".concat(I.__hash)+" "+"lights__light ".concat(null!=A&&A.includes(n.id_)?"in-group":""),children:[(0,f.jsxs)("div",{className:"jsx-".concat(I.__hash)+" lights__light-header",children:[(0,f.jsxs)("div",{className:"jsx-".concat(I.__hash)+" lights__light-header--action",children:[(0,f.jsx)(M.Z,{size:"sm",value:n.name,disabled:!0}),(0,f.jsx)(T.Z,{size:"sm",children:"update"})]}),(0,f.jsxs)("div",{className:"jsx-".concat(I.__hash)+" lights__light-header--action",children:[(0,f.jsx)(D.Z,{name:null==n?void 0:n.id_,value:null==n?void 0:n.is_on,onChange:function(){return q("toggle",{id:n.id_})}}),(0,f.jsx)("div",{onClick:function(){return k(n.id_)},className:"jsx-".concat(I.__hash)+" lights__light-header--action",children:(0,f.jsx)(x.a,{icon:"fa-palette"})})]})]}),(null==n?void 0:n.view)!=="color"?(0,f.jsx)(z,{onChange:function(e){0!=String(e).length&&e&&q("brightness",{id:n.id_,bri:e,name:n.name})},barCount:5,percentage:(null==n?void 0:n.bri)*100/254}):(0,f.jsx)(B,{hex:n.hex,onChange:function(e){return q("color",{id:n.id_,hex:e,name:n.name})}})]},t)})}),"object"==typeof g&&(0,f.jsx)(z,{onChange:function(e){0!=String(e).length&&e&&(String(e).startsWith("#")?q("color",{id:g.id_,hex:e}):q("brightness",{id:g.id_,bri:e}))},barCount:5,percentage:(null==g?void 0:g.bri)*100/254})]})]})},W=r(39925),Y=function(e){e.vid;var t=(0,y.a)(),r={home:(0,f.jsx)(function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:s.__hash,children:s}),(0,f.jsx)("div",{className:"jsx-".concat(s.__hash)+" home__default",children:(0,f.jsxs)("div",{className:"jsx-".concat(s.__hash)+" home__default--title",children:[t&&(null==t?void 0:t.name)&&(0,W.Z)(t.name)||"",", Home Automation."]})})]})},{}),surveillance:(0,f.jsx)(w,{}),light:(0,f.jsx)(q,{})};return t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i(),{id:s.__hash,children:s}),(0,f.jsx)(k.Z,{defaultView:"home",views:r})]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(h.Z,{})})}},13190:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(59499),i=r(21378),a=r.n(i),s=r(67294),o=[".d-flex.jsx-3465336323,.menu__close.jsx-3465336323,.menu-container.jsx-3465336323{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".menu-container.jsx-3465336323{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;background-color:transparent;position:relative;width:100%;}",".menu.jsx-3465336323{color:var(--gray-10);border:solid 1px var(--gray-80);--ui-icon-color:var(--gray-90);min-width:calc(100% - 14px);width:100%;border-radius:var(--border-radius);overflow:hidden;z-index:2;background-color:var(--gray-90);-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);position:relative;}",".menu__close.jsx-3465336323{top:calc((var(--s-1) + var(--s-9)) * -1);left:0;right:auto;position:absolute;margin-bottom:var(--s-9);color:var(--gray-30);--ui-icon-color:var(--gray-30);border-radius:var(--border-radius);border:solid 1px transparent;padding-left:var(--s-9);--ui-icon-color:var(--gray-50);}",".menu__close.jsx-3465336323:hover{color:var(--primary);--ui-icon-color:var(--primary);border:solid 1px var(--primary);}",".menu__close.jsx-3465336323:focus,.menu__close.jsx-3465336323:focus-within{background-color:var(--primary-o);}",".menu__lite.jsx-3465336323 .menu__option.jsx-3465336323{background-color:var(--gray-30);color:var(--gray-100);}",".menu__lite.jsx-3465336323 .menu__option.jsx-3465336323:hover{background-color:var(--primary);color:var(--gray-10);}",".menu.jsx-3465336323 .menu__search.jsx-3465336323{padding:12px;}",".menu.jsx-3465336323 .menu__no-results.jsx-3465336323{height:var(--s-element);line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".menu.menu__nav-item.jsx-3465336323{--ui-icon-color:var(--gray-40);}","@media (max-width:900px){.menu.menu__nav-item.jsx-3465336323{background-color:var(--gray-90);}}",".menu.menu__flat.jsx-3465336323{width:100%;overflow:hidden;min-width:200px;color:var(--gray-60);}",".menu.menu__flat.jsx-3465336323 .menu__option.jsx-3465336323:hover{background-color:var(--gray-70);}",".menu.menu__flat.jsx-3465336323 .menu__option.active.jsx-3465336323{color:var(--white);--ui-icon-color:var(--white);}",".menu.jsx-3465336323 .menu__option.jsx-3465336323{color:var(--gray-50);--ui-icon-color:var(--gray-50);z-index:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:calc(var(--s-element) + 0px);--ui-icon-width:16px;line-height:1;cursor:pointer;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:inherit;}",".menu.jsx-3465336323 .menu__option.jsx-3465336323:not(:last-child){border-bottom:solid 1px var(--gray-80);}",".menu.jsx-3465336323 .menu__option.jsx-3465336323:last-child{border-top:solid -1px transparent;}",".menu.jsx-3465336323 .menu__option.jsx-3465336323:hover{color:var(--gray-30);--ui-icon-color:var(--gray-30);}",".menu.jsx-3465336323 .menu__option.jsx-3465336323:hover.jsx-3465336323:not(:last-child){border-bottom:solid 1px var(--gray-60);}",".menu.jsx-3465336323 .menu__option.active.jsx-3465336323{background-color:var(--primary);color:var(--gray-30);--ui-icon-color:var(--gray-30);}",".menu.jsx-3465336323 .menu__option.disabled.jsx-3465336323{--ui-icon-color:var(--gray-50);color:var(--gray-50);cursor:default;position:relative;overflow:visible;}"];o.__hash="3465336323";var c=r(71054),l=r(10577),d=r(85893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(e){var t=e.options,r=e.variant,n=e.onSelect,i=e.value,h=e.search,x=(e.setSearch,e.size),b=e.traits,f=e.onClose,p=(0,s.useState)(""),g=p[0],m=p[1],_=!(null==t?void 0:t.every(function(e){return void 0===e})),v=(0,s.useState)(null),j=(v[0],v[1]),y=(0,s.useState)(t),w=y[0],k=y[1],S=function(e){j(e),n&&n(e)};return(0,s.useEffect)(function(){i&&j(i)},[i]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a(),{id:o.__hash,children:o}),(0,d.jsxs)("div",{className:"jsx-".concat(o.__hash)+" menu-container",children:[f&&(0,d.jsx)("div",{className:"jsx-".concat(o.__hash)+" menu__close",children:(0,d.jsx)(l.Z,{size:"sm",variant:"flat",traits:{afterIcon:"fa-xmark"},onClick:f,children:"close"})}),(0,d.jsxs)("div",{style:b&&null!=b&&b.height?u(u({},b),{},{overflowY:"auto"}):b||{},className:"jsx-".concat(o.__hash)+" "+"menu ".concat(r?"menu__".concat(r):"").concat(x?" menu-".concat(x):""),children:[h&&(0,d.jsx)("div",{className:"jsx-".concat(o.__hash)+" menu__search",children:(0,d.jsx)(c.Z,{type:"text",variant:r,value:g,placeholder:"Search",name:"search",onChange:function(e){var r=e.target.value.toLowerCase();m(r),k(null==t?void 0:t.filter(function(e){return("string"==typeof e?e:null==e?void 0:e.label).toLowerCase().includes(r)}))}})}),g&&_&&(null==w?void 0:w.length)===0?(0,d.jsx)("div",{className:"jsx-".concat(o.__hash)+" menu__no-results",children:"No results found."}):(0,d.jsx)(d.Fragment,{children:null==w?void 0:w.map(function(e,t){var r=["string","number"].includes(typeof e)?e:null!=e&&e.label?null==e?void 0:e.label:null==e?void 0:e.name,n=e.name&&e.value?e:["string","number"].includes(typeof e)?e:null==e?void 0:e.href;if(n)return(0,d.jsx)("div",{onClick:function(){return n&&(null==e?void 0:e.active)!==!1&&S(n)},className:"jsx-".concat(o.__hash)+" "+"menu__option ".concat((null==e?void 0:e.active)===!1?"disabled":"").concat(i===n?" active":"").concat(x?" menu__option-".concat(x):"","\n                    }"),children:(0,d.jsx)(l.Z,{variant:"flat",size:x,traits:{beforeIcon:null==e?void 0:e.icon,afterIcon:i===n?{icon:"fa-check"}:""},children:r})},t)})})]})]})]})}},59559:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(21378),i=r.n(n),a=r(67294),s=[".toggle-switch.jsx-371548259{position:relative;display:inline-block;width:40px;height:20px;}",".toggle-switch.jsx-371548259 input.jsx-371548259 [type=checkbox].jsx-371548259{opacity:0;width:0;height:0;}",".slider.jsx-371548259{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:20px;}",'.slider.jsx-371548259:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:var(--white);-webkit-transition:0.4s;transition:0.4s;border-radius:50%;}',"input.jsx-371548259:checked+.slider.jsx-371548259:not(.slider--disabled){background-color:#2196f3;}","input.jsx-371548259:checked+.slider.slider--disabled.jsx-371548259{cursor:not-allowed;background-color:var(--gray-40);-webkit-filter:blur(1px);filter:blur(1px);}","input.jsx-371548259:checked+.slider.slider--disabled.jsx-371548259:before{background-color:var(--gray-50);}","input.jsx-371548259:checked+.slider.jsx-371548259:before{-webkit-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}"];s.__hash="371548259";var o=r(50077),c=r(85893),l=function(e){var t=e.value,r=e.onChange,n=e.name,l=e.label,d=e.disabled,h=(0,a.useRef)(null);return(0,a.useEffect)(function(){h.current&&!0==t?h.current.setAttribute("checked",""):h.current.removeAttribute("checked")},[t,null==h?void 0:h.current]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i(),{id:s.__hash,children:s}),(0,c.jsx)(o.Z,{variant:"checkbox",label:l,children:(0,c.jsxs)("label",{className:"jsx-".concat(s.__hash)+" toggle-switch",children:[(0,c.jsx)("input",{disabled:d,ref:h,name:n,type:"checkbox",onChange:function(e){var t={target:{name:n,value:e.target.checked}};!d&&r&&r(t)},className:"jsx-".concat(s.__hash)}),(0,c.jsx)("span",{className:"jsx-".concat(s.__hash)+" "+"slider ".concat(d&&" slider--disabled"||"")})]})})]})}},39626:function(e,t,r){r.d(t,{aN:function(){return c}}),"function"==typeof SuppressedError&&SuppressedError;var n,i,a,s=(i=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;0!=i--;){var n,i,a,s=a[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}).__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;let o="__googleMapsScriptId";(a=n||(n={}))[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE";class c{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:n,id:i=o,language:a,libraries:l=[],mapIds:d,nonce:h,region:u,retries:x=3,url:b="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=n,this.id=i||o,this.language=a,this.libraries=l,this.mapIds=d,this.nonce=h,this.region=u,this.retries=x,this.url=b,this.version=f,c.instance){if(!s(this.options,c.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(c.instance.options)}`);return c.instance}c.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?n.FAILURE:this.done?n.SUCCESS:this.loading?n.LOADING:n.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}let r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(e=>!r[e]&&delete r[e]),(null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,r,n,i="The Google Maps JavaScript API",a="google",s="importLibrary",o="__ib__",c=document,l=window,d=(l=l[a]||(l[a]={})).maps||(l.maps={}),h=new Set,u=new URLSearchParams,x=()=>t||(t=new Promise((s,l)=>{var x,b,f,p;return x=this,b=void 0,f=void 0,p=function*(){var x;for(n in yield r=c.createElement("script"),r.id=this.id,u.set("libraries",[...h]+""),e)u.set(n.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[n]);u.set("callback",a+".maps."+o),r.src=this.url+"?"+u,d[o]=s,r.onerror=()=>t=l(Error(i+" could not load.")),r.nonce=this.nonce||(null===(x=c.querySelector("script[nonce]"))||void 0===x?void 0:x.nonce)||"",c.head.append(r)},new(f||(f=Promise))(function(e,t){function r(e){try{i(p.next(e))}catch(e){t(e)}}function n(e){try{i(p.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof f?i:new f(function(e){e(i)})).then(r,n)}i((p=p.apply(x,b||[])).next())})}));d[s]?console.warn(i+" only loads once. Ignoring:",e):d[s]=(e,...t)=>h.add(e)&&x().then(()=>d[s](e,...t))})(r);let n=this.libraries.map(e=>this.importLibrary(e));n.length||n.push(this.importLibrary("core")),Promise.all(n).then(()=>this.callback(),e=>{let t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}}}]);