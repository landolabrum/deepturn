"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{2420:function(e,t,a){a.d(t,{Z:function(){return home_controller_Home}});var r=a(65003),n=a.n(r),i=a(67294),s=[];s.__hash="2085888330";var o=[".surveillance.jsx-3472433715{min-height:500px;width:100%;}"];o.__hash="3472433715";var c=a(59499),l=["img.jsx-925066019{width:100%;height:auto;z-index:1;position:relative;}","img.jsx-925066019 .d-flex.jsx-925066019,img.jsx-925066019 img.jsx-925066019{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".d-flex.jsx-925066019,img.jsx-925066019{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"];l.__hash="925066019";var d=[".d-flex.jsx-2678087171,.image-control.jsx-2678087171 .image-control__controls.jsx-2678087171{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".image-control.jsx-2678087171{width:auto;position:relative;height:auto;overflow:hidden;outline:solid 1px var(--gray-80);}","@media (max-width:900px){.image-control.jsx-2678087171{max-width:calc(100vw - var(--padding) * 2);}}",".image-control.jsx-2678087171:hover .image-control__controls.jsx-2678087171{bottom:0;opacity:1;}",".image-control.jsx-2678087171 .image-control__element.jsx-2678087171{background-color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:auto;z-index:-1;}",".image-control.jsx-2678087171 .image-control__controls.jsx-2678087171{background-color:var(--gray-100);z-index:2;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:absolute;bottom:-100%;padding:0 var(--s-9);width:calc(100% - var(--s-9) * 2);left:0;height:var(--element-height);opacity:0;-webkit-transition:bottom 0.5s ease,opacity 0.5s ease;transition:bottom 0.5s ease,opacity 0.5s ease;}",".image-control.jsx-2678087171 .image-control__controls__control.jsx-2678087171{cursor:pointer;}",".image-control.jsx-2678087171 .image-control__controls__control.jsx-2678087171:hover{--ui-icon-color:var(--primary);}"];d.__hash="2678087171";var h=a(60682),x=a(59817),_=a(41927),u=a(99073),g=a(85893),components_ImageControl_ImageControl=function ImageControl(e){var t=e.children,a=e.variant,r=e.mediaType,s=void 0===r?"image":r,o=e.refreshInterval,c=void 0===o?1e3:o,l=e.error,b=e.loadingText,p=e.fixedLoad,j=(0,i.useRef)(null),m=(0,i.useState)(!0),v=m[0],w=m[1],y=(0,x.Z)("image-control__element",s,a),k=(0,u.dd)(),N=k.openModal,S=k.closeModal,C=k.isModalOpen;return(0,i.useEffect)(function(){var e=setInterval(function(){var e,t=null==j?void 0:null===(e=j.current)||void 0===e?void 0:e.offsetHeight;j.current&&t&&t>30?w(!1):l&&!v&&w(!0)},c);return function(){return clearInterval(e)}},[c,v,j.current]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n(),{id:d.__hash,children:d}),(0,g.jsxs)("div",{className:"jsx-".concat(d.__hash)+" "+"image-control".concat(v?" image-control__loading":""),children:[" ",!0==v&&(0,g.jsx)(h.Z,{height:300,position:void 0!==p&&p?void 0:"relative",text:l||b||void 0,dots:!["string","object"].includes(typeof l)&&void 0}),(0,g.jsx)("div",{id:"image-control__element",ref:j,className:"jsx-".concat(d.__hash)+" "+"".concat(y),children:i.Children.map(t,function(e){return(0,i.isValidElement)(e)?(0,i.cloneElement)(e):e})}),(0,g.jsxs)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls",children:[(0,g.jsx)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls__control",children:(0,g.jsx)(_.a,{icon:"fa-play-pause"})}),(0,g.jsx)("div",{className:"jsx-".concat(d.__hash)+" image-control__controls__control",children:(0,g.jsx)(_.a,{icon:"fa-expand",onClick:function(){C?S():N({children:(0,g.jsx)(ImageControl,{fixedLoad:!0,variant:a,mediaType:s,refreshInterval:c,error:l,children:t}),variant:"fullscreen"})}})})]})]})]})},b=a(11163);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){(0,c.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var UiVideo_controller_UiMedia=function(e){var t=e.src,a=e.variant,r=e.type,s=e.alt,o=e.loadingText,c=(0,i.useState)({variant:a,type:r}),d=c[0],h=c[1],x=(0,i.useState)(0),u=x[0],p=x[1];(0,b.useRouter)();var handleReload=function(){h(_objectSpread(_objectSpread({},d),{},{error:null})),p(function(e){return e+1})},RefreshLoadingText=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{style:{color:"#f90"},children:[o,", Failed"]}),(0,g.jsx)("div",{children:(0,g.jsx)(_.a,{icon:"fa-arrows-rotate",onClick:handleReload})})]})},handleError=function(e){e.preventDefault(),console.log("[ ERROR ]",e),d.error||h(_objectSpread(_objectSpread({},d),{},{error:(0,g.jsx)(RefreshLoadingText,{})}))};return d.loadingText=o,(0,i.useEffect)(function(){},[handleError,d]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n(),{id:l.__hash,children:l}),(0,g.jsx)(components_ImageControl_ImageControl,_objectSpread(_objectSpread({},d),{},{children:!d.error&&(0,g.jsx)("img",{src:t,alt:s,onError:handleError,className:"jsx-".concat(l.__hash)},u)}))]})},p=a(68991),j=a(37011),m=a(22516),surveillance_controller_Surveillance=function(){return(0,m.aF)(),(0,i.useEffect)(function(){},[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n(),{id:o.__hash,children:o}),(0,g.jsx)("div",{className:"jsx-".concat(o.__hash)+" surveillance",children:(0,g.jsxs)(j.Z,{xs:1,md:2,padding:"0 0 200px",children:[(0,g.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=2"),loadingText:"loading camera 2"}),(0,g.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=3"),loadingText:"loading camera 3"}),(0,g.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=1"),loadingText:"loading camera 1"}),(0,g.jsx)(UiVideo_controller_UiMedia,{src:"".concat(p.Z.serviceEndpoints.membership,"/api/stream/rtsp/?id=4"),loadingText:"loading camera 4"})]})})]})},v=a(5960),w=a(50029),y=a(16835),k=a(87794),N=a.n(k),S=[".d-flex.jsx-2276483184,.lights__light-header-title.jsx-2276483184,.lights__light-header-action.jsx-2276483184,.lights__light-header.jsx-2276483184,.lights__light.jsx-2276483184,.lights__bar-header.jsx-2276483184{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".lights.jsx-2276483184{width:var(--padding-width);padding:var(--padding);height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".lights__bar-header.jsx-2276483184{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;color:var(--gray-30);}",".lights__light.jsx-2276483184{margin:0;height:auto;overflow:hidden;}",".lights__light-header.jsx-2276483184{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-transform:capitalize;border-radius:var(--border-radius);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".lights__light-header-action.jsx-2276483184{min-height:var(--element-height);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;gap:var(--s-9);--ui-icon-color:var(--gray-40);}",".lights__light-header-action.jsx-2276483184:hover{--ui-icon-color:var(--gray-20);}",".lights__light-header-title.jsx-2276483184{min-height:var(--element-height);gap:var(--s-9);}"];S.__hash="2276483184";var C=a(59280),E=a(67979),O=a(71626),T=a(70483),views_lights_Lights=function(){var e,t,a,r,s=(0,E.U2)(),o=(0,y.Z)(s,2),c=(o[0],o[1]),l=(0,i.useState)(void 0),d=l[0],h=l[1],x=(0,C.ko)("IHomeService"),updateLight=function(e){h(function(){return d.map(function(t){return t.id_==e.id_&&(t=e),t})})},u=(e=(0,w.Z)(N().mark(function _callee(e){return N().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=updateLight,t.next=4,x.lightToggle(Number(e));case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),console.log("[Toggle](ERROR)",t.t2);case 11:case"end":return t.stop()}},_callee,null,[[0,8]])})),function(t){return e.apply(this,arguments)}),b=(t=(0,w.Z)(N().mark(function _callee2(e,t){return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=updateLight,a.next=4,x.lightBrightness(e,Number(t));case 4:a.t1=a.sent,(0,a.t0)(a.t1),a.next=11;break;case 8:a.prev=8,a.t2=a.catch(0),console.log("[brightnessChangedLight](ERROR)",a.t2);case 11:case"end":return a.stop()}},_callee2,null,[[0,8]])})),function(e,a){return t.apply(this,arguments)}),p=(a=(0,w.Z)(N().mark(function _callee3(e,t){return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=updateLight,a.next=4,x.lightColor(e,t);case 4:a.t1=a.sent,(0,a.t0)(a.t1),a.next=11;break;case 8:a.prev=8,a.t2=a.catch(0),console.log("[brightnessChangedLight](ERROR)",a.t2);case 11:case"end":return a.stop()}},_callee3,null,[[0,8]])})),function(e,t){return a.apply(this,arguments)}),toggleView=function(e){h(d.map(function(t){return(null==t?void 0:t.id_)==e&&((null==t?void 0:t.view)==void 0?t.view="color":(null==t?void 0:t.view)!=void 0&&delete t.view),t}))},m=(r=(0,w.Z)(N().mark(function _callee4(){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c({active:!0,body:"loading lights"}),e.prev=1,e.next=4,x.lights();case 4:h(e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("[ FETCH LIGHTS (ERR) ]",JSON.stringify(e.t0));case 11:case"end":return e.stop()}},_callee4,null,[[1,8]])})),function(){return r.apply(this,arguments)});return(0,i.useEffect)(function(){d||m().then(function(){return c({active:!1})})},[h]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n(),{id:S.__hash,children:S}),(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" lights",children:d&&(0,g.jsx)(j.Z,{xs:1,sm:2,lg:3,gap:15,children:Object.entries(d).map(function(e,t){var a=(0,y.Z)(e,2),r=(a[0],a[1]);return(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" lights__light",children:(0,g.jsx)(O.Z,{header:(0,g.jsxs)("div",{className:"jsx-".concat(S.__hash)+" lights__light-header",children:[(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" lights__light-header-title",children:(0,g.jsxs)("span",{onClick:function(){return u(r.id_)},className:"jsx-".concat(S.__hash),children:[null==r?void 0:r.name,(0,g.jsx)(T.Z,{name:null==r?void 0:r.id_,value:r.is_on})]})}),(0,g.jsx)("div",{className:"jsx-".concat(S.__hash)+" lights__light-header-action",children:(0,g.jsx)(_.a,{onClick:function(){return toggleView(r.id_)},icon:(null==r?void 0:r.view)!="color"?"fa-palette":"fa-sun"})})]}),onChange:function(e){String(e).includes("#")?p(r.id_,String(e)):b(r.id_,e)},isColor:"color"==r.view,barCount:5,percentage:100*r.bri/254})},t)})})})]})},home_controller_Home=function(e){e.vid;var t={surveillance:(0,g.jsx)(surveillance_controller_Surveillance,{}),lights:(0,g.jsx)(views_lights_Lights,{})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n(),{id:s.__hash,children:s}),(0,g.jsx)(v.Z,{variant:"fullwidth",title:"home",defaultView:"surveillance",views:t})]})}},71626:function(e,t,a){a.d(t,{Z:function(){return Graphs_UiBar_UiBar}});var r=a(65003),n=a.n(r),i=a(67294),s=[".d-flex.jsx-2538068454,.bar.jsx-2538068454 .bar__container.jsx-2538068454 .bar__bars-container.jsx-2538068454 .bar__percentage.jsx-2538068454,.bar.jsx-2538068454 .bar__container.jsx-2538068454 .bars__icon.jsx-2538068454,.bar.jsx-2538068454 .bar__container.jsx-2538068454 .bar__header.jsx-2538068454{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".bar.jsx-2538068454{min-width:140px;width:100%;}",".bar.jsx-2538068454 .bar__container.jsx-2538068454{border-radius:var(--border-radius);border:solid 1px var(--gray-60);padding:var(--s-9);}",".bar.jsx-2538068454 .bar__container.jsx-2538068454:hover .bar__bars-container.jsx-2538068454 .bar__percentage.jsx-2538068454{color:var(--white);text-shadow:#f30 1px 0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;visibility:visible;}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bar__header.jsx-2538068454{overflow:hidden;min-height:var(--element-height);white-space:nowrap;position:relative;line-height:1;}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bars__icon.jsx-2538068454{height:var(--element-height);padding-top:20px;--ui-icon-color:var(--gray-60);padding:30px 0 20px;}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bars__status.jsx-2538068454{position:absolute;right:var(--s-9);top:4px;text-transform:capitalize;font-size:var(--s-7);color:var(--yellow-opaque);--ui-icon-width:var(--s-6);}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bars__status.jsx-2538068454 .bars__status-low.jsx-2538068454{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:5px;}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bar__bars-container.jsx-2538068454{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;gap:var(--border-radius);overflow:hidden;border-radius:var(--border-radius);}",".bar.jsx-2538068454 .bar__container.jsx-2538068454 .bar__bars-container.jsx-2538068454 .bar__percentage.jsx-2538068454{font-size:var(--s-1);visibility:hidden;position:absolute;top:0;bottom:0;width:100%;height:100%;text-align:center;color:var(--gray-20-opaque);}",".bar__bars-content.jsx-2538068454{overflow:hidden;border-radius:var(--border-radius);border:solid 1px var(--gray-60);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);height:var(--element-height);}",".bar__bars-content.jsx-2538068454 .bar__bars-bar-filled.jsx-2538068454,.bar__bars-content.jsx-2538068454 .bar__bars-bar-partial.jsx-2538068454{height:100%;background-color:var(--bar-background,var(--yellow));}",".bar__timestamp.jsx-2538068454{width:100%;font-size:var(--s-9);padding-bottom:var(--s-9);line-height:1;color:var(--gray-50);white-space:nowrap;text-align:right;}"];s.__hash="2538068454";var o=a(41927),c=a(41523),l=a(42737),d=a(96486),h=a(85893),Graphs_UiBar_UiBar=function(e){var t,a=e.barCount,r=e.percentage,x=e.isColor,_=e.icon,u=e.status,g=e.timestamp,b=e.header,p=e.onChange,j=(0,i.useState)(r),m=j[0],v=j[1],w=(0,i.useRef)(null),y=(0,i.useRef)((0,d.debounce)(function(e){p&&p(e)},1e3)).current,handleMouseDrag=function(e){if(w.current){var t=w.current.getBoundingClientRect(),a=100-(e.clientY-t.top)/t.height*100,r=Math.max(0,Math.min(a,100)),n=!0==x?percentageToHex(r):a.toFixed(0);v(a),y(n)}},hslToHex=function(e,t,a){var r=t*Math.min(a/=100,1-a)/100,f=function(t){var n=(t+e/30)%12;return Math.round(255*(a-r*Math.max(Math.min(n-3,9-n,1),-1)))};return"#".concat(f(0).toString(16).padStart(2,"0")).concat(f(8).toString(16).padStart(2,"0")).concat(f(4).toString(16).padStart(2,"0"))},percentageToHex=function(e){return hslToHex(e/100*240,100,50)};return(0,i.useEffect)(function(){v(r)},[!!(r!=m&&!x)]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n(),{id:s.__hash,children:s}),(0,h.jsxs)("div",{className:"jsx-".concat(s.__hash)+" "+"bar".concat(s.graphContainer&&" ".concat(s.graphContainer)||""),children:[g&&(0,h.jsx)("div",{className:"jsx-".concat(s.__hash)+" bar__timestamp",children:(0,c.vc)(g,{time:!0})}),(0,h.jsxs)("div",{className:"jsx-".concat(s.__hash)+" bar__container",children:[b&&(0,h.jsxs)("div",{className:"jsx-".concat(s.__hash)+" bar__header",children:[b,_&&(0,h.jsx)("div",{className:"jsx-".concat(s.__hash)+" bars__icon",children:(0,h.jsx)(o.a,{icon:_})}),u&&(0,h.jsx)("div",{className:"jsx-".concat(s.__hash)+" bars__status",children:["STATUS_LOW","low","high"].includes(u)&&(0,h.jsxs)("div",{className:"jsx-".concat(s.__hash)+" bars__status-low",children:[(0,h.jsx)(o.a,{color:"#f90",icon:"fa-exclamation-triangle"}),(0,l.Z)(u)]})})]}),(0,h.jsxs)("div",{ref:w,onMouseDown:function(e){return handleMouseDrag(e)},onMouseMove:function(e){return 1===e.buttons&&handleMouseDrag(e)},className:"jsx-".concat(s.__hash)+" "+"bar__bars-container ".concat(s.barsContainer||"").concat(x&&" bar__bars-container--is-color"||"","\n            }"),children:[function(){for(var e=[],t={filledBar:"bar__bars-bar-filled",emptyBar:"bar__bars-bar-empty",partialBar:"bar__bars-bar-partial"},r=0;r<a;r++){var i=void 0,o={};x&&(o.backgroundColor=percentageToHex(m)),r<Math.floor(m*a/100)?i=t.filledBar:r===Math.floor(m*a/100)?(o.height="".concat(m*a%100,"%"),i=t.partialBar):(delete o.height,i=t.emptyBar),e.push((0,h.jsxs)("span",{className:"jsx-".concat(s.__hash),children:[(0,h.jsx)(n(),{id:s.__hash,children:s}),(0,h.jsx)("div",{className:"jsx-".concat(s.__hash)+" bar__bars-content",children:(0,h.jsx)("div",{style:o,className:"jsx-".concat(s.__hash)+" "+"bar__bars-bar ".concat(i)})})]},r))}return e}(),(0,h.jsx)("div",{className:"jsx-".concat(s.__hash)+" "+"bar__percentage".concat(s.percentageText?" ".concat(s.percentageText):""),children:(0,h.jsxs)("div",{className:"jsx-".concat(s.__hash),children:[null===(t=String(m))||void 0===t?void 0:t.split(".")[0],"%"]})})]})]})]})]})}}}]);