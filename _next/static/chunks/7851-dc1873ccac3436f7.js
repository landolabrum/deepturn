"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7851],{10530:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(16835),i=n(59499),a=n(8151),s=n.n(a),c=n(67294),o=[".d-flex.jsx-1773126006,.contact-form.jsx-1773126006{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".contact-form.jsx-1773126006{width:100%;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".contact-form__title.jsx-1773126006{font-size:var(--s-1);color:var(--gray-40);margin:var(--element-height) 0 var(--padding);text-transform:capitalize;}",".contact-form--action.jsx-1773126006{--ui-icon-color:var(--gray-20);}"];o.__hash="1773126006";var l=n(2612),d=n(49263),f=n(85893);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e){var t=e.onSubmit,n=e.user,i=e.submitText,a=(0,d.a)(),u=(0,c.useState)(void 0),x=u[0],v=u[1],p=(0,c.useState)(!0),h=p[0],g=p[1],y=n||a,b=["name","email","phone","address"];return(0,c.useEffect)(function(){y&&(console.log("[ USER FIELDS ]",Object.entries(y).filter(function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1],b.includes(n)}).map(function(e){var t=(0,r.Z)(e,2);return{name:t[0],value:t[1]}})),!0===h&&g(!1))},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s(),{id:o.__hash,children:o}),(0,f.jsxs)("div",{className:"jsx-".concat(o.__hash)+" contact-form",children:[(0,f.jsx)("div",{className:"jsx-".concat(o.__hash)+" contact-form__title",children:"contact"}),(0,f.jsx)(l.Z,{fields:x,disabled:h,onChange:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];console.log("[ FIELDS (1) ]",x);var n=e.target,r=n.name,i=n.value,a=function(){var t=function(){return"".concat(r," cannot be blank.")};if(e.target.error)return e.target.error;switch(r){case"firstName":case"lastName":if((null==i?void 0:i.length)<2)return"not long enough";break;case"email":if(!i)return t();if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i))return"email invalid";break;case"phone":if(!i)return t();break;case"address":if(!i)return t();g(!1)}},s=x.map(function(e){return e.name===r?m(m({},e),{},{value:i},t&&{error:a()}):e});console.log("[ updatedContact ]",s),console.log("[ FIELDS (2) ]",x),v(s)},onSubmit:function(e){var n="",r="",i=(e||x).reduce(function(e,t){return"firstName"===t.name?n=String(t.value):"lastName"===t.name&&(r=String(t.value)),e[t.name]=t.value,e},{});i.name="".concat(n," ").concat(r).trim(),t(i)},submitText:i})]})]})}},67851:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(8151),i=n.n(r),a=n(67294),s=[".d-flex.jsx-363974894,.verify__default.jsx-363974894,.loadslider.jsx-363974894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".loadslider.jsx-363974894{min-height:100px;min-width:100%;background-size:200% 100%;}","@-webkit-keyframes slidePulse-jsx-363974894{0%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}50%{background-image:linear-gradient(to right,#ff6347 25%,#f30 50%,#ff6347 75%);}100%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}}","@keyframes slidePulse-jsx-363974894{0%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}50%{background-image:linear-gradient(to right,#ff6347 25%,#f30 50%,#ff6347 75%);}100%{background-image:linear-gradient(to right,#f30 25%,#ff6347 50%,#f30 75%);}}",".verify.jsx-363974894{color:var(--white);}",".verify--header.jsx-363974894{color:var(--gray-40);width:var(--padding-width);max-width:var(--padding-width);overflow:hidden;padding:var(--padding) 0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;text-overflow:ellipsis;}",".verify--header--title.jsx-363974894{color:var(--gray-50);font-size:var(--s-3);}",".verify__default.jsx-363974894{background-color:var(--gray-80);min-height:50vh;color:var(--gray-40);line-height:1;padding:var(--padding);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--padding);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;border-radius:var(--border-radius);border:solid 1px var(--gray-60);box-shadow:var(--box-shadow-xl);}",".verify__default.jsx-363974894 h1.jsx-363974894,.verify__default.jsx-363974894 p.jsx-363974894{line-height:1;margin:0;}",".verify__default.jsx-363974894 p.jsx-363974894{color:var(--gray-50);}"];s.__hash="363974894";var c=n(11163),o=n(59499),l=n(50029),d=n(64687),f=n.n(d),u=[".d-flex.jsx-2012122347,.verify-email__content--loader.jsx-2012122347,.verify-email__content.jsx-2012122347,.verify-email.jsx-2012122347{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".verify-email.jsx-2012122347{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;border-radius:var(--border-radius);margin:var(--element-height) 0;color:var(--gray-70);background-color:var(--gray-80);min-height:500px;}","@media (max-width:1100px){.verify-email.jsx-2012122347{margin:var(--element-height) var(--padding);width:var(--padding-width);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}",".verify-email__content.jsx-2012122347{margin:var(--padding);width:var(--padding-width);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}",".verify-email__content--loader.jsx-2012122347{height:100%;}","@media (max-width:1100px){.verify-email__content--loader.jsx-2012122347{height:100%;}}",".verify-email__content__sign-in.jsx-2012122347{width:100%;}",".verify-email__content__sign-in--title.jsx-2012122347{font-size:var(--s-2);color:var(--gray-20);line-height:2;}"];u.__hash="2012122347";var m=n(52553),x=n(5531),v=n(40384),p=n(2612),h=n(72967),g=n(18508),y=n(99013),b=n(85893);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){var t,n,r,s,c,o,d=e.token,h=e.onSuccess,j=(0,a.useState)({status:"verifying_email"}),k=j[0],w=j[1],O=(0,m.ko)("IMemberService");(0,y.dd)().openModal;var S=(t=(0,l.Z)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return w({status:"no_token_present"}),e.abrupt("return");case 3:return e.next=5,O.verifyEmail(String(d));case 5:(t=e.sent)&&w(t);case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),N=(n=(0,l.Z)(f().mark(function e(){var t,n,r,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==k||null===(t=k.fields)||void 0===t||null===(t=t.find(function(e){return"password"==e.name}))||void 0===t?void 0:t.value,(r=k.customer).metadata.password=n,e.next=5,O.updateMember(r.id,r);case 5:(i=e.sent)&&h(i.email);case 7:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,a.useEffect)(function(){S()},[d]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:u.__hash,children:u}),(0,b.jsx)("div",{className:"jsx-".concat(u.__hash)+" verify-email",children:(0,b.jsxs)("div",{className:"jsx-".concat(u.__hash)+" "+"verify-email__content".concat("verification_success"===k.status?" verify-email__content--success":""),children:[(0,b.jsx)("div",{className:"jsx-".concat(u.__hash)+" verify-email__content--loader",children:(0,b.jsx)(x.Z,{position:"relative",text:(c="",(o=function(e){return"string"==typeof e})(k.status)?c=String(k.status):o(k.detail)?c=String(k.detail):null!==(r=k.detail)&&void 0!==r&&r.detail&&o(null===(s=k.detail)||void 0===s?void 0:s.detail)&&(c=k.detail.detail),(0,v.Z)(c)),dots:(null==k?void 0:k.status)!=void 0&&["verifying_email"].includes(null==k?void 0:k.status)})}),"incomplete"==k.status&&(null==k?void 0:k.fields)&&(0,b.jsx)(p.Z,{title:String(null==k?void 0:k.detail)||void 0,onChange:function(e){var t,n,r=e.target,i=r.name,a=r.value,s=null==k?void 0:k.fields,c=function(e){return null==s?void 0:s.find(function(t){return t.name===e})},o=null===(t=c("password"))||void 0===t?void 0:t.value,l=null===(n=c("confirm_password"))||void 0===n?void 0:n.value,d=null==s?void 0:s.map(function(e){if(e.name===i){var t=_(_({},e),{},{value:a});return"confirm_password"===i&&o!==a&&""!==o||"password"===i&&l!==a&&""!==l?t.error="Not Same as Password":t.error&&delete t.error,t}return e});w(_(_({},k),{},{fields:d}))},fields:k.fields,onSubmit:N}),"verification_success"===k.status&&k.customer.email&&(0,b.jsx)("div",{className:"jsx-".concat(u.__hash)+" verify-email__content__sign-in",children:(0,b.jsx)(g.Z,{href:"/account",children:"Go to Account"})})]})})]})},w=[".d-flex.jsx-4197818945,.verify-account.jsx-4197818945{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".verify-account.jsx-4197818945{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--padding);border-radius:var(--border-radius);background-color:var(--gray-80);}"];w.__hash="4197818945";var O=function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:w.__hash,children:w}),(0,b.jsxs)("div",{className:"jsx-".concat(w.__hash)+" verify-account",children:[(0,b.jsx)("h1",{className:"jsx-".concat(w.__hash),children:"Verify Account"}),(0,b.jsx)(p.Z,{fields:[]})]})]})},S=[".d-flex.jsx-3361621884,.verify-payment--content__contact-form.jsx-3361621884,.verify-payment--header.jsx-3361621884,.verify-payment--content.jsx-3361621884,.verify-payment__token-needed.jsx-3361621884,.verify-payment.jsx-3361621884{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".card.jsx-3361621884,.verify-payment--content__contact-form.jsx-3361621884,.verify-payment__token-needed.jsx-3361621884{width:var(--padding-width);border-radius:var(--border-radius);padding:var(--padding);background-color:var(--gray-90);}",".verify-payment.jsx-3361621884{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--padding);width:100%;}",".verify-payment__item.jsx-3361621884{width:100%;}",".verify-payment__token-needed.jsx-3361621884{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:var(--secondary);font-size:var(--s-3);height:100%;min-height:400px;width:inherit;}",".verify-payment--header.jsx-3361621884,.verify-payment--content.jsx-3361621884{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".verify-payment--header.jsx-3361621884{text-transform:capitalize;width:100%;color:var(--gray-40);font-size:var(--s-2);}",".verify-payment--content.jsx-3361621884{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:var(--gray-40);gap:var(--padding);width:100%;}",".verify-payment--content__contact-form.jsx-3361621884{margin-bottom:var(--element-height);}"];S.__hash="3361621884";var N=n(27017),P=n(10530),I=n(83941);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=function(e){var t,n,r=e.token,s=(0,a.useState)(),c=s[0],o=s[1],d=(0,N.Z)(),u=d.addCartItem,x=d.getCartItems,v=(0,m.ko)("IMemberService"),p=(0,m.ko)("IShoppingService"),h=(0,a.useState)(),g=h[0],y=h[1],j=function(){if(!c||!c.items)return o({error:"Token is invalid"}),!1;var e=c.items.every(function(e){return e.price_id&&e.product_id&&String(e.price_id).startsWith("price_")&&String(e.product_id).startsWith("prod_")});return e||o({error:"Token is invalid"}),e},_=(t=(0,l.Z)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.getProducts({price_ids:c.items.map(function(e){return e.price_id})});case 3:Object.values(e.sent.data).forEach(function(e){u(E(E({},e),{},{price:E(E({},e.price),{},{qty:1})}))}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("[ getProducts ( error )]",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)}),k=(n=(0,l.Z)(f().mark(function e(){var t,n,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return e.prev=1,e.next=4,v.decryptJWT({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiSm9obiBEb2UiLCJlbWFpbCI6InBvb0BuYW5pLmNvbSIsIml0ZW1zIjpbeyJwcm9kdWN0X2lkIjoicHJvZF9QNWxJMzVyMkVXVEF4aSIsInByaWNlX2lkIjoicHJpY2VfMU9IWm1KSW9kZUtaUkxEVlVlU2xZNk03In1dfQ.Zju6uFgG1L6xI26i8CQGVub-PnCoqP2Q-93qtnD1Yvo",secret:"secretKey",algorithm:"HS256"});case 4:null!=(t=e.sent)&&t.decoded&&o(t.decoded),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),o({error:null===e.t0||void 0===e.t0||null===(n=e.t0.detail)||void 0===n?void 0:n.detail}),console.error("[ JWT DECODE (ERROR) ]",null===e.t0||void 0===e.t0||null===(i=e.t0.detail)||void 0===i?void 0:i.detail);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(){return n.apply(this,arguments)});return((0,a.useEffect)(function(){r&&k()},[r]),(0,a.useEffect)(function(){y(x()),null!=c&&c.items&&j()&&_()},[null==c?void 0:c.items]),r&&(null==c||!c.error)&&j())?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:S.__hash,children:S}),(0,b.jsxs)("div",{className:"jsx-".concat(S.__hash)+" verify-payment",children:[(0,b.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--header"}),(0,b.jsxs)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--content",children:[c.items&&(0,b.jsx)(I.Z,{cart:g}),(0,b.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment--content__contact-form",children:(0,b.jsx)(P.Z,{user:{email:c.email,name:c.name,phone:c.phone},onSubmit:function(){},submitText:"payment info"})})]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:S.__hash,children:S}),(0,b.jsx)("div",{className:"jsx-".concat(S.__hash)+" verify-payment__token-needed",children:(0,b.jsx)("div",{className:"jsx-".concat(S.__hash),children:String(null==c?void 0:c.error)||"No token is present, assure you clicked the right link."})})]})},C=function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:s.__hash,children:s}),(0,b.jsxs)("div",{className:"jsx-".concat(s.__hash)+" verify__default",children:[(0,b.jsx)("h1",{className:"jsx-".concat(s.__hash),children:"Verify"}),(0,b.jsx)("p",{className:"jsx-".concat(s.__hash),children:"Here is where you will verify a token in which you should have received via a specified contact method."})]})]})},F=function(){var e=(0,c.useRouter)(),t=(e.pathname,e.query),n=(0,a.useState)(""),r=n[0],o=n[1],l=(0,a.useState)(),d=l[0],f=l[1],u=(0,a.useState)(),m=u[0],x=u[1],v={"sign-in":(0,b.jsx)(h.Z,{email:d}),email:(0,b.jsx)(k,{token:m,onSuccess:function(e){return f(e)}}),account:(0,b.jsx)(O,{}),payment:(0,b.jsx)(D,{token:m})};return(0,a.useEffect)(function(){"string"==typeof t.vid&&o(t.vid),"string"==typeof t.token&&x(t.token),d&&o("sign-in")},[t,d]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i(),{id:s.__hash,children:s}),(0,b.jsx)("div",{className:"jsx-".concat(s.__hash)+" verify",children:void 0===v[r]?(0,b.jsx)(C,{}):v[r]})]})}}}]);